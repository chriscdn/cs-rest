import e from"is-object";import t from"lodash.get";import o from"axios";import s from"lodash.isnil";class r extends Error{constructor(t="Internal error",o=null,s=-32603){if(e(t)){const e=t;super(e.message),this.code=void 0,this.data=void 0,this.code=e.code,this.data=e.data}else super(t),this.code=void 0,this.data=void 0,this.code=s,this.data=o}}const i={index:0,get next(){return this.index=this.index+1,this.index}};class n{constructor(e,t){this.session=void 0,this.relativePath=void 0,this._batchQueue=void 0,this.session=e,this.relativePath=t,this.resetQueue()}requestObject(e,t,o){return{jsonrpc:"2.0",method:e,id:o,params:t}}handleResponse(e){if(Object.prototype.hasOwnProperty.call(e,"result"))return e.result;if(Object.prototype.hasOwnProperty.call(e,"error")){const t=e.error;throw new r(t.message,t.data,t.code)}throw Error("The server did not respond correctly.")}async request(e,t,o=i.next){const s=await this.session.postBody(this.relativePath,{rpc:this.requestObject(e,t,o)});return this.handleResponse(s.data)}resetQueue(){this._batchQueue=[]}queue(e,t,o=i.next){return this._batchQueue.push(this.requestObject(e,t,o)),this}async batch(e=!1){const o=this._batchQueue;this.resetQueue();const s=await this.session.postBody(this.relativePath,{rpc:o});return t(s,"data.data",[]).map(t=>{if(e)return this.handleResponse(t);try{return this.handleResponse(t)}catch(e){return e}})}rhnode(e,t,o=[],s=i.next){return this.request(t,{dataid:e,args:o},s)}rhnodeQueue(e,t,o=[],s=i.next){return this.queue(t,{dataid:e,args:o},s)}}var a;!function(e){e[e.AssocType=-18]="AssocType",e[e.BooleanType=5]="BooleanType",e[e.ClassType=9]="ClassType",e[e.DapiNodeType=-72]="DapiNodeType",e[e.DapiSessionType=-74]="DapiSessionType",e[e.DapiStreamType=-68]="DapiStreamType",e[e.DapiVersionType=-69]="DapiVersionType",e[e.DateType=-7]="DateType",e[e.DynamicType=-127]="DynamicType",e[e.ErrorType=1]="ErrorType",e[e.FileType=-107]="FileType",e[e.FrameType=10]="FrameType",e[e.IntegerType=2]="IntegerType",e[e.JavaObjectType=-42]="JavaObjectType",e[e.ListType=-2]="ListType",e[e.LongType=-8]="LongType",e[e.ObjectType=-128]="ObjectType",e[e.ObjRefType=3]="ObjRefType",e[e.RealType=-4]="RealType",e[e.RecArrayType=-110]="RecArrayType",e[e.RecordType=-109]="RecordType",e[e.ScriptType=-3]="ScriptType",e[e.SocketType=-102]="SocketType",e[e.StringType=-1]="StringType",e[e.UAPIType=-196]="UAPIType",e[e.UndefinedType=0]="UndefinedType",e[e.VoidType=8]="VoidType",e[e.WAPIWorkType=-75]="WAPIWorkType"}(a||(a={}));const l=()=>"undefined"==typeof window;var d,p=()=>l()?new(require("form-data")):new FormData;class c{constructor(e){this._session=void 0,this._session=e}get session(){return this._session}}class m extends c{auth(){return this.session.get("/api/v1/auth/")}}function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var o=arguments[t];for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(e[s]=o[s])}return e},u.apply(this,arguments)}!function(e){e[e.Accession=834]="Accession",e[e.ActiveFolder=1298]="ActiveFolder",e[e.Activeview=30309]="Activeview",e[e.ActivityManager=907]="ActivityManager",e[e.Alias=1]="Alias",e[e.Appearance=480]="Appearance",e[e.AppearanceFolder=483]="AppearanceFolder",e[e.AppearancesVolume=481]="AppearancesVolume",e[e.ArchiveFolder=31711]="ArchiveFolder",e[e.BackupManager=290]="BackupManager",e[e.BackupProcess=291]="BackupProcess",e[e.BestBets=274]="BestBets",e[e.Blog=356]="Blog",e[e.BlogEntry=357]="BlogEntry",e[e.BoxFolder=530]="BoxFolder",e[e.Category=131]="Category",e[e.CategoryFolder=132]="CategoryFolder",e[e.Channel=207]="Channel",e[e.ChannelVol=209]="ChannelVol",e[e.Classification=199]="Classification",e[e.ClassificationShortcut=197]="ClassificationShortcut",e[e.ClassificationTree=196]="ClassificationTree",e[e.ClassifiedItems=194]="ClassifiedItems",e[e.Collection=298]="Collection",e[e.Column=902]="Column",e[e.Comments=345]="Comments",e[e.CommentsReply=348]="CommentsReply",e[e.CommentsVol=346]="CommentsVol",e[e.CommExpertContainer=3030338]="CommExpertContainer",e[e.CommExpertGroup=3030339]="CommExpertGroup",e[e.CommStore=3030329]="CommStore",e[e.CommTemplate=3030002]="CommTemplate",e[e.CommTemplateFolder=3030333]="CommTemplateFolder",e[e.CommTemplateVol=3030004]="CommTemplateVol",e[e.CommURLStore=3030335]="CommURLStore",e[e.CommWorkspace=3030334]="CommWorkspace",e[e.CommXSLVolume=3030205]="CommXSLVolume",e[e.CompoundDoc=136]="CompoundDoc",e[e.CompoundEMail=557]="CompoundEMail",e[e.ContentModuleFolder=3030372]="ContentModuleFolder",e[e.CSApplicationManifest=32658]="CSApplicationManifest",e[e.CSApplicationsVolume=32657]="CSApplicationsVolume",e[e.CustomView=146]="CustomView",e[e.CustomViewTemplate=844]="CustomViewTemplate",e[e.DataFlowManager=270]="DataFlowManager",e[e.DataSourceFolder=276]="DataSourceFolder",e[e.DirWalker=277]="DirWalker",e[e.Discussion=215]="Discussion",e[e.DispositionGroup=602]="DispositionGroup",e[e.Document=144]="Document",e[e.DocumentLLNode=1297]="DocumentLLNode",e[e.DocumentServer=283]="DocumentServer",e[e.Dossier=32912]="Dossier",e[e.DossierCabinet=32916]="DossierCabinet",e[e.DossierCabinetArchive=31707]="DossierCabinetArchive",e[e.DossierTemplate=32914]="DossierTemplate",e[e.DossierTemplateFolder=31709]="DossierTemplateFolder",e[e.DossierTemplatesVolume=32917]="DossierTemplatesVolume",e[e.DossierTemplateVolume=32915]="DossierTemplateVolume",e[e.DossierVolume=32913]="DossierVolume",e[e.DPSBinding=31602]="DPSBinding",e[e.DPSFolder=31601]="DPSFolder",e[e.DPSVolume=31603]="DPSVolume",e[e.DTDLLNode=335]="DTDLLNode",e[e.DynamicView=900]="DynamicView",e[e.EMail=749]="EMail",e[e.EmailConversationItems=2504]="EmailConversationItems",e[e.EnterpriseArchiveDocument=753]="EnterpriseArchiveDocument",e[e.Facet=904]="Facet",e[e.FacetFolder=905]="FacetFolder",e[e.FacetTree=903]="FacetTree",e[e.FailedFolder=1299]="FailedFolder",e[e.FixedSystemColumn=906]="FixedSystemColumn",e[e.Folder=0]="Folder",e[e.Form=223]="Form",e[e.Generation=2]="Generation",e[e.GENERICCONTENTMODULE=3030371]="GENERICCONTENTMODULE",e[e.GlobalAppearance=482]="GlobalAppearance",e[e.HoldContainer=833]="HoldContainer",e[e.HTMLConversion=282]="HTMLConversion",e[e.HTMLFormView=226]="HTMLFormView",e[e.Importer=293]="Importer",e[e.Inbox=731]="Inbox",e[e.IndexEngine=368]="IndexEngine",e[e.IndexTracer=147]="IndexTracer",e[e.IndexUpdate=281]="IndexUpdate",e[e.InternalOTDS=924]="InternalOTDS",e[e.ItemTemplateVol=541]="ItemTemplateVol",e[e.ItemTemplateVolFolder=542]="ItemTemplateVolFolder",e[e.JournalVolume=361]="JournalVolume",e[e.LibraryExtractor=259]="LibraryExtractor",e[e.LibraryObj=272]="LibraryObj",e[e.LLNodeEmailFolder=751]="LLNodeEmailFolder",e[e.LLNodeFAQ=123475]="LLNodeFAQ",e[e.LLNodeFAQEntry=123476]="LLNodeFAQEntry",e[e.LLNodeForum=123469]="LLNodeForum",e[e.LLNodeForumEntry=123470]="LLNodeForumEntry",e[e.LLNodeURQuestion=430]="LLNodeURQuestion",e[e.LLNodeURReply=432]="LLNodeURReply",e[e.Locators=422]="Locators",e[e.Mailbox=732]="Mailbox",e[e.MailStore=3030331]="MailStore",e[e.ManagedSpace=31710]="ManagedSpace",e[e.MediaType=410]="MediaType",e[e.MediaTypesContainer=414]="MediaTypesContainer",e[e.MemcachedFolder=919]="MemcachedFolder",e[e.MemcachedProcess=920]="MemcachedProcess",e[e.Merge=273]="Merge",e[e.MicroPost=1281]="MicroPost",e[e.MicroPostVolume=1282]="MicroPostVolume",e[e.MultiVolClassification=372]="MultiVolClassification",e[e.MultiVolClassificationProxy=374]="MultiVolClassificationProxy",e[e.MultiVolClassificationTree=373]="MultiVolClassificationTree",e[e.MyReservedItems=870]="MyReservedItems",e[e.MyWorkbenches=532]="MyWorkbenches",e[e.NAVMENUVOL=3030756]="NAVMENUVOL",e[e.News=208]="News",e[e.OTCIndexObj=257]="OTCIndexObj",e[e.Partition=371]="Partition",e[e.PartitionMap=370]="PartitionMap",e[e.PersonalComm=3030203]="PersonalComm",e[e.PersonalCommSystemVolume=3030003]="PersonalCommSystemVolume",e[e.PersonalCommVol=3030204]="PersonalCommVol",e[e.PersonalStagingFolder=398]="PersonalStagingFolder",e[e.PersonalWebpage=3030343]="PersonalWebpage",e[e.PhysicalItemBox=424]="PhysicalItemBox",e[e.PhysicalItemContainer=412]="PhysicalItemContainer",e[e.PhysicalItemCopy=419]="PhysicalItemCopy",e[e.PhysicalItem_non_Container=411]="PhysicalItem_non_Container",e[e.PhysObjAdmin=415]="PhysObjAdmin",e[e.PhysObjBatchLabels=418]="PhysObjBatchLabels",e[e.PhysObjCirculation=416]="PhysObjCirculation",e[e.PhysObjReports=417]="PhysObjReports",e[e.Poll=218]="Poll",e[e.Process=271]="Process",e[e.Profile=195]="Profile",e[e.Project=202]="Project",e[e.ProjectTemplate=543]="ProjectTemplate",e[e.ProjectVol=201]="ProjectVol",e[e.Prospector=384]="Prospector",e[e.ProspectorQueries=380]="ProspectorQueries",e[e.ProspectorSnapshot=387]="ProspectorSnapshot",e[e.Provenance=829]="Provenance",e[e.Proxy=260]="Proxy",e[e.PublishingFolder=31712]="PublishingFolder",e[e.PublishingFolderVolume=31713]="PublishingFolderVolume",e[e.QAFolder=441]="QAFolder",e[e.QueryFile=296]="QueryFile",e[e.QuestionVolume=431]="QuestionVolume",e[e.RecentItems=327]="RecentItems",e[e.RecordType=425]="RecordType",e[e.RecordTypesContainer=428]="RecordTypesContainer",e[e.RedForm=32918]="RedForm",e[e.RedFormVolume=32919]="RedFormVolume",e[e.Release=138]="Release",e[e.RemoteLLDataSource=381]="RemoteLLDataSource",e[e.Reply=134]="Reply",e[e.Report=299]="Report",e[e.Revision=139]="Revision",e[e.RIMSDisposition=555]="RIMSDisposition",e[e.RIMSDispositionsContainer=554]="RIMSDispositionsContainer",e[e.RIMSHoldMaintenance=552]="RIMSHoldMaintenance",e[e.RIMSRsiContainer=553]="RIMSRsiContainer",e[e.RMAdministration=556]="RMAdministration",e[e.RMClassification=551]="RMClassification",e[e.RMFolder=426]="RMFolder",e[e.RMPart=427]="RMPart",e[e.RMReportsContainer=558]="RMReportsContainer",e[e.RMThesaurus=559]="RMThesaurus",e[e.ScanConfigurationVolume=2505]="ScanConfigurationVolume",e[e.ScheduledHoldCriteria=835]="ScheduledHoldCriteria",e[e.ScriptNode=32901]="ScriptNode",e[e.SearchBroker=258]="SearchBroker",e[e.SearchEngine=369]="SearchEngine",e[e.SearchManager=269]="SearchManager",e[e.SearchReport=278]="SearchReport",e[e.SearchResultsTemplate=383]="SearchResultsTemplate",e[e.SearchTemplate=292]="SearchTemplate",e[e.Simplate=31678]="Simplate",e[e.SkyPodLLVolume=49547]="SkyPodLLVolume",e[e.SliceFolder=275]="SliceFolder",e[e.SocialObject=1280]="SocialObject",e[e.SocialObjectVolume=1283]="SocialObjectVolume",e[e.SPCJOBDESCR=797]="SPCJOBDESCR",e[e.SPCJOBDESCRFOLDER=796]="SPCJOBDESCRFOLDER",e[e.SPCVOLUME=795]="SPCVOLUME",e[e.spdcommittee=3030202]="spdcommittee",e[e.spdcommitteevol=3030201]="spdcommitteevol",e[e.spdcommitteevolume=3030001]="spdcommitteevolume",e[e.spdemail=3030130]="spdemail",e[e.Spider=280]="Spider",e[e.StorageManagement=421]="StorageManagement",e[e.SubmitVersionNode=231]="SubmitVersionNode",e[e.Task=206]="Task",e[e.TaskGroup=205]="TaskGroup",e[e.TaskList=204]="TaskList",e[e.TaskListVol=210]="TaskListVol",e[e.TaskMilestone=212]="TaskMilestone",e[e.Template=230]="Template",e[e.TemplateFolder=268]="TemplateFolder",e[e.TextDocument=145]="TextDocument",e[e.Topic=130]="Topic",e[e.Transfers=423]="Transfers",e[e.TransportBox=531]="TransportBox",e[e.TransportItem=526]="TransportItem",e[e.TransportItemPart=527]="TransportItemPart",e[e.UrgentRequests=3030330]="UrgentRequests",e[e.URL=140]="URL",e[e.VirtualFolder=899]="VirtualFolder",e[e.VolBlog=123461]="VolBlog",e[e.VolCategories=133]="VolCategories",e[e.VolClassification=198]="VolClassification",e[e.VolComments=347]="VolComments",e[e.VolDAP=987352]="VolDAP",e[e.VolDeletedItems=405]="VolDeletedItems",e[e.VolDirectory=375]="VolDirectory",e[e.VolDiscussion=143]="VolDiscussion",e[e.VolDomainWorkspace=180]="VolDomainWorkspace",e[e.VolDTD=336]="VolDTD",e[e.VolEditWorkflow=162]="VolEditWorkflow",e[e.VolFacets=901]="VolFacets",e[e.VolLibrary=141]="VolLibrary",e[e.VolOrphan=403]="VolOrphan",e[e.VolPersonalStaging=397]="VolPersonalStaging",e[e.VolPerspectives=908]="VolPerspectives",e[e.VolPhysObj=413]="VolPhysObj",e[e.VolRecMan=550]="VolRecMan",e[e.VolRelease=137]="VolRelease",e[e.VolReports=211]="VolReports",e[e.VolSystem=148]="VolSystem",e[e.VolTracer=149]="VolTracer",e[e.VolumeFolder=484]="VolumeFolder",e[e.VolumeLLVolume=1296]="VolumeLLVolume",e[e.VolWarehouse=525]="VolWarehouse",e[e.VolWorkbin=142]="VolWorkbin",e[e.VolWorkflow=161]="VolWorkflow",e[e.WarehouseFolder=529]="WarehouseFolder",e[e.WebFormConnectionVolume=236]="WebFormConnectionVolume",e[e.WebFormDatabaseConnection=235]="WebFormDatabaseConnection",e[e.WebFormLookup=234]="WebFormLookup",e[e.WebFormLookupVolume=233]="WebFormLookupVolume",e[e.WebReports=30303]="WebReports",e[e.WFMapLLNode=128]="WFMapLLNode",e[e.WFStatusNode=190]="WFStatusNode",e[e.WIKI=5573]="WIKI",e[e.WIKIPAGE=5574]="WIKIPAGE",e[e.Workbench=528]="Workbench",e[e.WorkflowAttachments=154]="WorkflowAttachments",e[e.XMLActivatorCon=286]="XMLActivatorCon",e[e.XMLActivatorProd=285]="XMLActivatorProd"}(d||(d={}));class h extends c{addablenodetypes(e){return this.session.get(`api/v1/nodes/${e}/addablenodetypes`)}async addDocument({parent_id:e,fileHandler:t,apiVersion:o="v1",name:s,options:r={}}){const i=`api/${o}/nodes`;if(l()){const o=require("fs").promises,n=require("path"),a=await o.readFile(t),l=s||n.basename(t),p=u({},r,{type:d.Document,name:l,parent_id:e,file:{file:a,name:l}});return this.session.postForm(i,p)}if(this.session._isFile(t)){const o=s||t.name,n=u({},r,{type:d.Document,name:o,parent_id:e,file:{file:t,name:o}});return this.session.postForm(i,n)}throw new Error("Invalid file.")}async addDocumentMajor({parent_id:e,fileHandler:t,name:o,description:s,options:r={}}){const i=await this.addDocument({parent_id:e,fileHandler:t,name:o,options:u({},r,{advanced_versioning:!0})}),n=i.data.id;return await this.session.versions.promote({dataid:n,versionNumber:1,description:s}),await this.session.versions.deleteVersion({dataid:n,versionNumber:1}),i}addItem(e,t,o,s={}){return this.session.postBody("api/v2/nodes",u({type:e,parent_id:t,name:o},s))}node({dataid:e,apiVersion:t="v2",params:o={}}){return this.session.get(`api/${t}/nodes/${e}`,{params:o})}ancestors(e,t={}){return this.session.get(`api/v1/nodes/${e}/ancestors`,{params:t})}volumeInfo(e){return this.session.get(`api/v1/volumes/${e}`)}volumes(){return this.session.get("api/v2/volumes")}addFolder(e,t,o={}){return this.addItem(d.Folder,e,t,o)}addGeneration(e,t,o,s,r={}){return this.addItem(d.Generation,e,t,u({original_id:o,version_number:s},r))}nodes(e,t={}){return this.session.get(`api/v2/nodes/${e}/nodes`,{params:t})}children(e,t={}){return this.nodes(e,t)}delete(e){return this.session.delete(`api/v1/nodes/${e}`)}download({dataid:e,apiVersion:t="v1",filePath:o}){return l()?this.session.get(`api/${t}/nodes/${e}/content`,{responseType:"stream"}).then(e=>{const t=require("fs").createWriteStream(o);return e.data.pipe(t),new Promise((e,o)=>{t.on("finish",e),t.on("error",o)})}):Promise.reject("Not implemented yet")}audit({dataid:e,apiVersion:t="v2",params:o={}}){return this.session.get(`api/${t}/nodes/${e}/audit`,{params:o})}}class y{constructor(e,t){this.session=void 0,this.mapId=void 0,this.workflowPropertiesInfo=null,this.session=e,this.mapId=t}async start(){this.workflowPropertiesInfo=await this.session.workflow.start(this.mapId)}get form(){return this.workflowPropertiesInfo.forms[0]}findWorkflowAttribute(e){return Object.entries(this.form.schema.properties).find(([t,o])=>o.title===e)}get processId(){return this.workflowPropertiesInfo.data.process_id}get attachmentsFolderId(){const e=this.workflowPropertiesInfo.data.data_packages.find(e=>1===e.type&&1===e.sub_type);return null==e?void 0:e.data.attachment_folder_id}get wantComments(){return this.workflowPropertiesInfo.data.comments_on}get wantAuthentication(){return this.workflowPropertiesInfo.data.authentication}setWorkflowAttribute(e,t){var o;const[s,r]=null!=(o=this.findWorkflowAttribute(e))?o:[];if("array"===r.type===Array.isArray(t))return this.form.data[s]=t,y;throw new Error("Invalid type.")}async formUpdate(){return await this.session.workflow.draftprocessesPut(this.processId,{action:"formUpdate",values:this.form.data})}async initiate({comment:e,password:t}={}){await this.formUpdate();const o=u({action:"Initiate"},this.wantComments&&{comment:e},this.wantAuthentication&&{authentication_info:{password:t}});return await this.session.workflow.draftprocessesPut(this.processId,o)}}class f extends c{workflowInitiator(e){return new y(this.session,e)}start(e){return this.draftprocesses(e).then(e=>e.results.draftprocess_id).then(e=>this.draftprocessesUpdate(e))}async draftprocesses(e){const{data:t}=await this.session.postForm("api/v2/draftprocesses",{workflow_id:e});return t}async draftprocessesUpdate(e){const{data:t}=await this.session.get("api/v1/forms/draftprocesses/update",{params:{draftprocess_id:e}});return t}async draftprocessesPut(e,t){const{data:o}=await this.session.putForm(`api/v2/draftprocesses/${e}`,{body:t});return o}}class T extends c{scriptNode(e,t={}){return this.session.postForm(`api/v1/rhcore/${e}`,t)}}class b extends c{search(e,t={}){return this.session.postBody("api/v2/search",u({where:e},t))}regions(e={}){return this.session.get("api/v1/regions",e)}}class C extends c{constructor(e){super(e),this.USER=void 0,this.GROUP=void 0,this.USER=0,this.GROUP=1}userQuery(e,t={},o="v2"){const s=u({limit:20,where_type:JSON.stringify([this.USER,this.GROUP]),query:e},t);return this.session.get(`api/${o}/members`,{params:s})}member(e,t="v2"){return this.session.get(`api/${t}/members/${e}`)}}class V extends c{async addVersion({dataid:e,fileHandler:t,apiVersion:o="v1",fileName:s,options:r={}}){console.assert(null!=e,"dataid cannot be null"),console.assert(null!=t,"fileHandler cannot be null");const i=`api/${o}/nodes/${e}/versions`;if(l()){const e=require("fs").promises,o=require("path"),n=u({file:{file:await e.readFile(t),name:s||o.basename(t)}},r);return this.session.postForm(i,n)}if(this.session._isFile(t)){const e=u({file:{file:t,name:s||t.name}},r);return this.session.postForm(i,e)}throw new Error("Invalid file.")}async download({dataid:e,version:t,filePath:o}){return console.assert(null!=e,"dataid cannot be null"),console.assert(null!=t,"version cannot be null"),console.assert(null!=o,"filePath cannot be null"),l()?this.session.get(`api/v1/nodes/${e}/versions/${t}/content`,{responseType:"stream"}).then(e=>{const t=require("fs").createWriteStream(o);return e.data.pipe(t),new Promise((e,o)=>{t.on("finish",e),t.on("error",o)})}):Promise.reject("Not implemented yet")}async list(e){return this.session.get(`api/v1/nodes/${e}/versions`)}async version(e,t="latest"){return this.session.get(`api/v1/nodes/${e}/versions/${t}`)}async promote({dataid:e,versionNumber:t,description:o=null}){return console.assert(null!=e,"dataid cannot be null"),console.assert(null!=t,"number_to_keep must be an integer"),this.session.postBody(`api/v2/nodes/${e}/versions/${t}/promote`,u({},!!o&&{description:o}))}async deleteVersion({dataid:e,versionNumber:t,apiVersion:o="v1"}){return console.assert(null!=e,"dataid cannot be null"),console.assert(null!=t,"number_to_keep must be an integer"),this.session.delete(`api/${o}/nodes/${e}/versions/${t}`)}async purge({dataid:e,number_to_keep:t=1}){return console.assert(null!=e,"dataid cannot be null"),console.assert(!isNaN(t),"number_to_keep must be an integer"),this.session.deleteForm(`api/v2/nodes/${e}/versions`,{number_to_keep:t})}}class v extends c{run(e,t={}){return this.session.get(`api/v1/nodes/${e}/output`,{params:t})}}class F{constructor(e){this.axios=void 0,this._nodes=void 0,this._auth=void 0,this._workflow=void 0,this._rhcore=void 0,this._members=void 0,this._search=void 0,this._webreports=void 0,this._versions=void 0,this.baseUrl=void 0,this.baseUrl=e.baseUrl,this.axios=(e=>{const s=(e=>{const s=o.create({baseURL:e.baseUrl,paramsSerializer:{indexes:null}});return s.interceptors.response.use(e=>{const o=t(e,"headers.otcsticket");return o&&(s.defaults.headers.common.OTCSTicket=o),e},e=>Promise.reject(e)),s})(e),r=e.username,i=e.password,n=e.otcsticket;if(n)s.defaults.headers.common.OTCSTicket=n;else{if(!r||!i)throw Error("You must provide an otcsticket or username and password.");s.interceptors.request.use(async s=>{var n;if(null!=(n=s.headers.common)&&n.OTCSTicket)return s;{const n=p();n.append("username",r),n.append("password",i);const a=l()?await o.post(`${e.baseUrl}/api/v1/auth/`,n.getBuffer(),{headers:n.getHeaders()}):await o.post(`${e.baseUrl}/api/v1/auth/`,n);return s.headers.OTCSTicket=t(a,"data.ticket"),s}})}return s})(e)}get nodes(){return null==this._nodes&&(this._nodes=new h(this)),this._nodes}get auth(){return null==this._auth&&(this._auth=new m(this)),this._auth}get workflow(){return null==this._workflow&&(this._workflow=new f(this)),this._workflow}get rhcore(){return null==this._rhcore&&(this._rhcore=new T(this)),this._rhcore}get members(){return null==this._members&&(this._members=new C(this)),this._members}get search(){return null==this._search&&(this._search=new b(this)),this._search}get webreports(){return null==this._webreports&&(this._webreports=new v(this)),this._webreports}get versions(){return null==this._versions&&(this._versions=new V(this)),this._versions}get dataTypesEnum(){return a}rpcClient(e="/api/v1/rh/rpc/rhnode/"){return new n(this,e)}_isObject(e){return e&&"object"==typeof e&&e.constructor===Object}_isString(e){return"string"==typeof e||e instanceof String}_isBoolean(e){return"boolean"==typeof e}_isFile(e){return"string"==typeof(null==e?void 0:e.name)}objectToForm(e){const t=p();for(const[o,r]of Object.entries(e))r&&r.name&&r.file?t.append(o,r.file,r.name):Array.isArray(r)||this._isObject(r)||this._isBoolean(r)?t.append(o,JSON.stringify(r)):s(r)||t.append(o,r);return t}putForm(e,t){const o=this.objectToForm(t);return l()?this.put(e,o.getBuffer(),{headers:o.getHeaders()}):this.put(e,o)}postForm(e,t){const o=this.objectToForm(t);return l()?this.post(e,o.getBuffer(),{headers:o.getHeaders(),maxBodyLength:Infinity}):this.post(e,o,{maxBodyLength:Infinity})}patchForm(e,t){const o=this.objectToForm(t);return l()?this.patch(e,o.getBuffer(),{headers:o.getHeaders()}):this.patch(e,o)}deleteForm(e,t){return this.delete(e)}putBody(e,t){return this.putForm(e,{body:t})}postBody(e,t){return this.postForm(e,{body:t})}patchBody(e,t){return this.patchForm(e,{body:t})}deleteBody(e,t){return this.deleteForm(e,{body:t})}get(e,t){return this.axios.get(e,t)}post(e,t,o){return this.axios.post(e,t,o)}put(e,t,o){return this.axios.put(e,t,o)}patch(e,t,o){return this.axios.patch(e,t,o)}options(e,t){return this.axios.options(e,t)}delete(e,t){return this.axios.delete(e,t)}async $get(e,t){return(await this.get(e,t)).data}}const g=e=>void 0!==e.code&&void 0!==e.data;export{n as RPCClient,r as RPCError,F as Session,g as isRPCError};
//# sourceMappingURL=cs-rest.modern.js.map
